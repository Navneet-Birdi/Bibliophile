(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{211:function(e,t,c){},212:function(e,t,c){"use strict";c.r(t);var a,n,s,i=c(177),r=c(28),o=c(0),l=c.n(o),j=c(184),b=c(234),u=c(236),d=c(232),m=c(181),O=c(30),h=c(10),v=c(11),x=c(18),p=c(12),f=c(2),A=l.a.createContext(),g=function(e){var t=e.children,c=Object(o.useState)("Search..."),a=Object(p.a)(c,2),n=a[0],s=a[1],i=Object(o.useState)([]),r=Object(p.a)(i,2),l=r[0],j=r[1],b=Object(o.useState)(!0),u=Object(p.a)(b,2),d=u[0],m=u[1],O=Object(o.useState)(""),h=Object(p.a)(O,2),g=h[0],k=h[1],N=Object(o.useCallback)(Object(x.a)(Object(v.a)().mark((function e(){var t,c,a,s;return Object(v.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,fetch("".concat("https://www.googleapis.com/books/v1/volumes?q=").concat(n));case 4:return t=e.sent,e.next=7,t.json();case 7:c=e.sent,(a=c.items)?(s=a.slice(0,20).map((function(e){var t;return{id:e.id,author:e.volumeInfo.authors,title:e.volumeInfo.title,cover_img:(null===(t=e.volumeInfo.imageLinks)||void 0===t?void 0:t.thumbnail)||"",description:e.volumeInfo.description||""}})),j(s),s.length>1?k("Your Search Result"):k("No Search Result Found!!")):(j([]),k("No Search Result Found!!")),m(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0),m(!1);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),[n]);return Object(o.useEffect)((function(){N()}),[n,N]),Object(f.jsx)(A.Provider,{value:{loading:d,books:l,setSearchTerm:s,resultTitle:g,setResultTitle:k},children:t})},k=function(){return Object(o.useContext)(A)},N=(c(155),function(){var e=Object(o.useState)(!1),t=Object(p.a)(e,2),c=t[0];t[1];return Object(f.jsx)("nav",{className:"navbar",id:"navbar",children:Object(f.jsxs)("div",{className:"container navbar-content flex",children:[Object(f.jsx)("div",{className:"brand-and-toggler flex flex-sb",children:Object(f.jsxs)(O.b,{to:"/",className:"navbar-brand flex",children:[Object(f.jsx)("img",{src:"data:image/png;base64,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",alt:"site logo"}),Object(f.jsx)("span",{className:"text",children:"Bibliophile"})]})}),Object(f.jsx)("div",{className:c?"navbar-collapse show-navbar-collapse":"navbar-collapse",children:Object(f.jsxs)("ul",{className:"navbar-nav",children:[Object(f.jsx)("li",{className:"nav-item",children:Object(f.jsx)(O.b,{to:"book",className:"navlink",children:"Home"})}),Object(f.jsx)("li",{className:"nav-item",children:Object(f.jsx)(O.b,{to:"login",className:"navlink",children:"Login"})}),Object(f.jsx)("li",{className:"nav-item",children:Object(f.jsx)(O.b,{to:"signup",className:"navlink",children:"Signup"})})]})})]})})}),w=function(){var e=k(),t=e.setSearchTerm,c=e.setResultTitle,a=Object(o.useRef)(""),n=Object(h.m)();Object(o.useEffect)((function(){return a.current.focus()}),[]);var s=function(e){e.preventDefault(),0===a.current.value.trim().replace(/[^\w\s]/gi,"").length?(t("Search..."),c("Please Enter Something....")):t(a.current.value),n("/book")};return Object(f.jsxs)("div",{className:"ui fluid category search",onSubmit:s,children:[Object(f.jsxs)("div",{className:"ui icon input",children:[Object(f.jsx)("input",{className:"prompt",type:"text",placeholder:"Search...",ref:a}),Object(f.jsx)("button",{className:"ui brown basic button",onClick:s,children:" Search "})]}),Object(f.jsx)("div",{className:"results"})]})},S=c.p+"static/media/library-img.9b5f70fa.jpg",y=function(){return Object(f.jsxs)("div",{className:"holder",children:[Object(f.jsx)(N,{}),Object(f.jsxs)("div",{className:"header-content flex flex-c text-center text-white",style:{backgroundImage:"url(".concat(S,")")},children:[Object(f.jsx)("h2",{className:"header-title",children:"Find Your Book Of Choice"}),Object(f.jsx)("br",{}),Object(f.jsx)("p",{className:"header-text",children:"The worth of book is to be measured by what you can carry away from it"}),Object(f.jsx)(w,{})]})]})},C=function(){return Object(f.jsx)("div",{className:"ui active centered inline loader"})},U=c.p+"static/media/cover_not_found.69846940.jpg",F=c(238),V=c(237),I=c(186),q=c(241),L=c(240),P=c(152),X=c(235),T=Object(X.a)(a||(a=Object(P.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]))),W=Object(X.a)(n||(n=Object(P.a)(["\n  mutation addUser($username: String!, $email: String!, $password: String!) {\n    addUser(username: $username, email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]))),H=Object(X.a)(s||(s=Object(P.a)(["\n  mutation saveBookToUser($title: String!, $image: String, $isbn: String, $description: String, $authors: [String]) {\n    saveBookToUser(title: $title, image: $image, isbn: $isbn, description: $description, authors: [String]) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"])));var R=function(e){var t=e.open,c=e.setOpen,a=e.bookName,n=e.coverImg,s=e.description,i=Object(L.a)(H),r=Object(p.a)(i,2),l=r[0],j=r[1],b=(j.error,j.data,Object(o.useState)(!1)),u=Object(p.a)(b,2),d=u[0],m=u[1],O=function(){var e=Object(x.a)(Object(v.a)().mark((function e(){var t;return Object(v.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l({variables:{title:a,image:n,description:s}});case 2:t=e.sent,t.data.saveBookToUser&&m(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)(V.a,{onClose:function(){return c(!1)},onOpen:function(){return c(!0)},open:t,children:[Object(f.jsx)(V.a.Header,{children:a}),Object(f.jsxs)(V.a.Content,{image:!0,children:[Object(f.jsx)(I.a,{size:"medium",src:n,wrapped:!0}),Object(f.jsxs)(V.a.Description,{children:[d&&Object(f.jsx)("p",{children:"Your book was saved"}),Object(f.jsx)(q.a,{children:"Description"}),Object(f.jsx)("p",{children:s})]})]}),Object(f.jsxs)(V.a.Actions,{children:[Object(f.jsx)(F.a,{color:"black",onClick:function(){return c(!1)},children:"Close"}),Object(f.jsx)(F.a,{content:"Save",labelPosition:"right",icon:"checkmark",onClick:O,positive:!0})]})]})},z=function(e){var t,c=Object(o.useState)(!1),a=Object(p.a)(c,2),n=a[0],s=a[1];return Object(f.jsxs)("div",{className:"ui grid book-item",children:[Object(f.jsx)("div",{className:"four wide column book-item-img",children:Object(f.jsx)(F.a,{basic:!0,onClick:function(){return s(!0)},children:Object(f.jsx)("img",{src:e.cover_img,alt:"cover"})})}),Object(f.jsxs)("div",{className:"book-item-info title",children:[Object(f.jsx)(O.b,Object(r.a)(Object(r.a)({to:"/book/".concat(e.id)},e),{},{children:Object(f.jsx)("div",{className:"book-item-info-item",children:Object(f.jsx)("span",{children:e.title})})})),Object(f.jsxs)("div",{className:"book-item-info-item author",children:[Object(f.jsx)("span",{className:"author",children:"Author: "}),Object(f.jsx)("span",{children:null===(t=e.author)||void 0===t?void 0:t.join(",")})]}),Object(f.jsxs)("div",{className:"book-item-info-item edcount",children:[Object(f.jsx)("span",{className:"author",children:"Total Editions: "}),Object(f.jsx)("span",{children:e.edition_count})]}),Object(f.jsxs)("div",{className:"book-item-info-item pbyear",children:[Object(f.jsx)("span",{className:"author",children:"First Publish Year: "}),Object(f.jsx)("span",{children:e.first_publish_year})]})]}),n&&Object(f.jsx)(R,{open:n,setOpen:s,bookName:e.title,coverImg:e.cover_img,description:e.description})]})},E=function(){var e=k(),t=e.books,c=e.loading,a=e.resultTitle,n=t.map((function(e){return Object(r.a)(Object(r.a)({},e),{},{id:e.id.replace("/works/",""),cover_img:e.cover_img?e.cover_img:U})}));return c?Object(f.jsx)(C,{}):Object(f.jsx)("section",{className:"booklist",children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("div",{className:"section-title",children:Object(f.jsx)("h2",{children:a})}),Object(f.jsx)("div",{className:"booklist-content-grid",children:n.slice(0,30).map((function(e,t){return Object(f.jsx)(z,Object(r.a)({},e),t)}))})]})})},J=function(){return Object(f.jsxs)("main",{children:[Object(f.jsx)(y,{}),Object(f.jsx)(E,{})]})},Q=c(20),G=c(233),Y=c(53),B=c(52),K=c(159),M=new(function(){function e(){Object(Y.a)(this,e)}return Object(B.a)(e,[{key:"getProfile",value:function(){return Object(K.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!(!e||this.isTokenExpired(e))}},{key:"isTokenExpired",value:function(e){return Object(K.a)(e).exp<Date.now()/1e3&&(localStorage.removeItem("id_token"),!0)}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.reload()}}]),e}()),D=function(){var e=Object(o.useState)({username:"",email:"",password:""}),t=Object(p.a)(e,2),c=t[0],a=t[1],n=Object(L.a)(W),s=Object(p.a)(n,2),i=s[0],l=s[1],j=l.error,b=l.data,u=function(e){var t=e.target,n=t.name,s=t.value;a(Object(r.a)(Object(r.a)({},c),{},Object(Q.a)({},n,s)))},d=function(){var e=Object(x.a)(Object(v.a)().mark((function e(t){var a,n;return Object(v.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(c),e.prev=2,e.next=5,i({variables:Object(r.a)({},c)});case 5:a=e.sent,n=a.data,M.login(n.addUser.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(f.jsx)("div",{className:"col-12 col-lg-10",children:Object(f.jsxs)("div",{className:"card",children:[Object(f.jsx)("h4",{className:"card-header",children:"Sign Up"}),Object(f.jsxs)("div",{className:"card-body",children:[b?Object(f.jsxs)("p",{children:["Success! You may now head"," ",Object(f.jsx)(O.b,{to:"/",children:"back to the homepage."})]}):Object(f.jsxs)(G.a,{onSubmit:d,children:[Object(f.jsxs)(G.a.Field,{children:[Object(f.jsx)("label",{children:"Username"}),Object(f.jsx)("input",{className:"form-input",placeholder:"Your username",name:"username",type:"text",value:c.name,onChange:u})]}),Object(f.jsxs)(G.a.Field,{children:[Object(f.jsx)("label",{children:"Email"}),Object(f.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",value:c.email,onChange:u})]}),Object(f.jsxs)(G.a.Field,{children:[Object(f.jsx)("label",{children:"Password"}),Object(f.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:c.password,onChange:u})]}),Object(f.jsx)(F.a,{className:"btn btn-block btn-primary",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),j&&Object(f.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:j.message})]})]})})})},Z=function(e){var t=Object(o.useState)({email:"",password:""}),c=Object(p.a)(t,2),a=c[0],n=c[1],s=Object(L.a)(T),i=Object(p.a)(s,2),l=i[0],j=i[1],b=j.error,u=j.data,d=function(e){var t=e.target,c=t.name,s=t.value;n(Object(r.a)(Object(r.a)({},a),{},Object(Q.a)({},c,s)))},m=function(){var e=Object(x.a)(Object(v.a)().mark((function e(t){var c,s;return Object(v.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(a),e.prev=2,e.next=5,l({variables:Object(r.a)({},a)});case 5:c=e.sent,s=c.data,M.login(s.login.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:n({email:"",password:""});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(f.jsx)("div",{className:"col-12 col-lg-10",children:Object(f.jsxs)("div",{className:"card",children:[Object(f.jsx)("h4",{className:"card-header",children:"Login"}),Object(f.jsxs)("div",{className:"card-body",children:[u?Object(f.jsxs)("p",{children:["Success! You may now head"," ",Object(f.jsx)(O.b,{to:"/",children:"back to the homepage."})]}):Object(f.jsxs)(G.a,{onSubmit:m,children:[Object(f.jsxs)(G.a.Field,{children:[Object(f.jsx)("label",{children:"Email"}),Object(f.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",value:a.email,onChange:d})]}),Object(f.jsxs)(G.a.Field,{children:[Object(f.jsx)("label",{children:"Password"}),Object(f.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:a.password,onChange:d})]}),Object(f.jsx)("button",{type:"submit",children:"Submit"})]}),Object(f.jsx)("br",{}),Object(f.jsx)(O.b,{to:"../Signup",className:"navbar-brand flex",children:"Forgot to Sign In? Click Here"}),b&&Object(f.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:b.message})]})]})})})},_=c(185),$="https://www.googleapis.com/books/v1/volumes/",ee=function(){var e=Object(h.o)().id,t=Object(o.useState)(!1),c=Object(p.a)(t,2),a=c[0],n=c[1],s=Object(o.useState)(null),i=Object(p.a)(s,2),r=i[0],l=i[1],j=Object(h.m)();return Object(o.useEffect)((function(){function t(){return(t=Object(x.a)(Object(v.a)().mark((function t(){var c,a,s,i,r,o,j,b,u;return Object(v.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat($).concat(e));case 3:return c=t.sent,t.next=6,c.json();case 6:(a=t.sent)?(i=a.volumeInfo,r=i.description,o=i.title,j=i.authors,b=null===(s=a.volumeInfo.imageLinks)||void 0===s?void 0:s.thumbnail,u={author:j[0],description:r?r.value:"No Description Found",title:o,cover_img:b||U},l(u)):l(null),n(!1),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0),n(!1);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})))).apply(this,arguments)}n(!0),function(){t.apply(this,arguments)}()}),[e]),a?Object(f.jsx)(C,{}):Object(f.jsx)("section",{className:"book-details",children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsxs)("button",{type:"button",className:"arrow",onClick:function(){return j("/book")},children:[Object(f.jsx)(_.a,{size:22}),Object(f.jsx)("span",{className:"back",children:" Go Back"})]}),Object(f.jsxs)("div",{className:"book-details-content grid",children:[Object(f.jsx)("div",{className:"book-details-img",children:Object(f.jsx)("img",{src:null===r||void 0===r?void 0:r.cover_img,alt:"cover img"})}),Object(f.jsxs)("div",{className:"book-details-info",children:[Object(f.jsx)("div",{className:"book-details-item title",children:Object(f.jsx)("span",{className:"title",children:null===r||void 0===r?void 0:r.title})}),Object(f.jsx)("div",{className:"book-details-item description",children:Object(f.jsx)("span",{className:"description",children:null===r||void 0===r?void 0:r.description})}),Object(f.jsxs)("div",{className:"book-details-item",children:[Object(f.jsx)("span",{className:"places",children:"Author:"}),Object(f.jsx)("span",{className:"text-italic",children:null===r||void 0===r?void 0:r.author})]})]})]})]})})},te=(c(211),Object(j.a)({uri:"/graphql"})),ce=Object(m.a)((function(e,t){var c=t.headers,a=localStorage.getItem("id_token");return{headers:Object(r.a)(Object(r.a)({},c),{},{authorization:a?"Bearer ".concat(a):""})}})),ae=new b.a({link:ce.concat(te),cache:new u.a});var ne=function(){return Object(f.jsx)(g,{children:Object(f.jsx)(d.a,{client:ae,children:Object(f.jsx)(O.a,{children:Object(f.jsx)("div",{className:"container",children:Object(f.jsxs)(h.c,{children:[Object(f.jsx)(h.a,{path:"/",element:Object(f.jsx)(J,{})}),Object(f.jsx)(h.a,{path:"/login",element:Object(f.jsx)(Z,{})}),Object(f.jsx)(h.a,{path:"/signup",element:Object(f.jsx)(D,{})}),Object(f.jsx)(h.a,{path:"/book",element:Object(f.jsx)(E,{})}),Object(f.jsx)(h.a,{path:"/book/:id",element:Object(f.jsx)(ee,{})})]})})})})})},se=document.getElementById("root");Object(i.createRoot)(se).render(Object(f.jsx)(ne,{}))}},[[212,1,2]]]);
//# sourceMappingURL=main.68560a11.chunk.js.map